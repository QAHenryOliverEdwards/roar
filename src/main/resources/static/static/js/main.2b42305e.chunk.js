(this["webpackJsonproar-dev-branch"]=this["webpackJsonproar-dev-branch"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(12),a=n.n(s),r=n(3),o=(n(17),n(18),n(19),n(2)),i=n.n(o),u=n(5),l=n(0),j=function(e){var t=e.style;return Object(l.jsx)("h1",{className:"title",style:t,children:"Welcome to Roar"})},p=n(23),b=n(25),d=function(e){var t=e.userInputFunc,n=e.searchFunc;return Object(l.jsxs)(p.a,{className:"my-3",children:[Object(l.jsx)("input",{type:"search",onChange:function(e){return t(e)},className:"form-control"}),Object(l.jsx)(b.a,{variant:"secondary",onClick:function(){return n()},children:"Search"})]})},f=function(e){var t=[];return e.forEach((function(e){e.posts.forEach((function(n){var c={postID:n.id,name:e.name,body:n.body,childrenID:[]};!function e(t,n,s){if(!Array.isArray(n)||0===n.length)return c;n.forEach((function(n){return c.childrenID.push({pID:t.id,cID:n.id,level:s}),s+=1,e(n,n.children,s)}))}(n,n.children,1),t.push(c)}))})),t},x=n(24),h=function(e){var t=e.post,n=e.replyBoxProps,c=e.replyBoxFunc,s=e.setReplyBoxText,a=e.submitReplyFunc,r=e.selfEditBoxProps,o=e.editBoxFunc,i=e.setSelfEditBoxText,u=e.submitEditFunc;return console.log(t),!1===n.isBox&&!1===r.isEditBox?Object(l.jsx)("div",{children:Object(l.jsxs)(x.a,{className:"dark-green-bg",children:[Object(l.jsx)("div",{className:"container-fluid px-0",children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)(x.a.Title,{className:"post-name col-11",children:t.name}),Object(l.jsx)(b.a,{variant:"link",className:"col-1 justify-content-end card-title button-no-decoration",onClick:function(){o(r.postID)},children:"\u270f"})]})}),Object(l.jsx)(x.a.Text,{className:"post-text",children:t.body}),Object(l.jsx)(b.a,{variant:"link",onClick:function(){c(n.postID)},className:"button-as-link px-0",children:"Reply"})]})}):!1===n.isBox&&!0===r.isEditBox?Object(l.jsx)("div",{children:Object(l.jsxs)(x.a,{className:"dark-green-bg",children:[Object(l.jsx)(x.a.Title,{className:"post-name",children:t.name}),Object(l.jsx)("textarea",{className:"form-control",rows:2,onChange:function(e){i(r.postID,e)}}),Object(l.jsx)(b.a,{variant:"primary",onClick:function(){u(r.postID)},children:"Finish Edit!"})]})}):Object(l.jsx)("div",{children:Object(l.jsxs)(x.a,{className:"dark-green-bg",children:[Object(l.jsx)(x.a.Title,{className:"post-name",children:t.name}),Object(l.jsx)(x.a.Text,{className:"post-text",children:t.body}),Object(l.jsx)("textarea",{className:"form-control",rows:2,onChange:function(e){s(n.postID,e)}}),Object(l.jsx)(b.a,{variant:"primary",onClick:function(){a(n.postID)},children:"Submit Reply"})]})})},O=function(e){var t=e.post,n=e.selfEditBoxProps,c=e.editBoxFunc,s=e.setSelfEditBoxText,a=e.submitEditFunc;return!1===n.isEditBox?Object(l.jsx)("div",{children:Object(l.jsxs)(x.a,{className:"light-green-bg",children:[Object(l.jsx)("div",{className:"container-fluid px-0",children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)(x.a.Title,{className:"post-name col-11",children:t.name}),Object(l.jsx)(b.a,{variant:"link",className:"col-1 justify-content-end card-title button-no-decoration",onClick:function(){c(n.postID)},children:"\u270f"})]})}),Object(l.jsx)(x.a.Text,{className:"post-text",children:t.body}),Object(l.jsxs)(x.a.Text,{className:"post-text",children:["At reply level ",t.level]})]})}):!0===n.isEditBox?Object(l.jsx)("div",{children:Object(l.jsxs)(x.a,{className:"light-green-bg",children:[Object(l.jsx)(x.a.Title,{className:"post-name",children:t.name}),Object(l.jsx)("textarea",{className:"form-control",rows:2,onChange:function(e){s(n.postID,e)}}),Object(l.jsx)(b.a,{variant:"primary",onClick:function(){a(n.postID)},children:"Finish Edit!"})]})}):void 0},m=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://127.0.0.1:8082/users/getID",{headers:{token:t}});case 2:return n=e.sent,e.next=5,n.text();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.postDictionary,n=Object(c.useState)([]),s=Object(r.a)(n,2),a=s[0],o=s[1],j=Object(c.useState)([]),p=Object(r.a)(j,2),b=p[0],d=p[1],f=Object(c.useState)([]),x=Object(r.a)(f,2),v=x[0],g=x[1],y=Object(c.useState)([]),I=Object(r.a)(y,2),D=I[0],N=I[1],k=Object(c.useCallback)((function(){g(t)}),[t]),S=Object(c.useCallback)((function(e){var n=[];if(e){if(e){for(var c in t){var s=t[c];if(e!==s.postID){var a={postID:s.postID,isEditBox:!1};n.push(a)}else if(e===s.postID){var r={postID:s.postID,isEditBox:!0,boxText:""};n.push(r)}}N(n)}}else{for(var o in t){var i={postID:t[o].postID,isEditBox:!1};n.push(i)}N(n)}}),[t]),C=Object(c.useCallback)((function(e,t){for(var n in D){var c=D[n];c.postID===e&&(c.boxText=t.target.value,console.log(c.boxText))}}),[D]),F=Object(c.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c,s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("auth-roar"),e.next=3,m(c);case 3:for(s in e.sent,D)(a=D[s]).postID===t&&(n={body:a.boxText});return e.next=7,fetch("http://127.0.0.1:8082/posts/update/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 7:202===e.sent.status?console.log("Update successful!"):console.log("Update failed!");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[D]),w=Object(c.useCallback)((function(e){var n=[];if(e){if(e){for(var c in t){var s=t[c];if(e!==s.postID){var a={postID:s.postID,isBox:!1};n.push(a)}else if(e===s.postID){var r={postID:s.postID,isBox:!0,boxText:""};n.push(r)}}d(n)}}else{for(var o in t){var i={postID:t[o].postID,isBox:!1};n.push(i)}d(n)}}),[t]),E=Object(c.useCallback)((function(e,t){for(var n in b){var c=b[n];c.postID===e&&(c.boxText=t.target.value,console.log(c.boxText))}}),[b]),T=Object(c.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c,s,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("auth-roar"),e.next=3,m(c);case 3:for(a in s=e.sent,b)(r=b[a]).postID===t&&(n={body:r.boxText,visibility:!0,user:{id:s},parent:{id:t}});return e.next=7,fetch("http://127.0.0.1:8082/posts/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 7:201===e.sent.status?console.log("Reply successful"):console.log("Reply failed");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b]),B=Object(c.useCallback)((function(){var e=[],t=[],n=function(e){for(var t in v)if(v[t].postID===e)return{postID:v[t].postID,name:v[t].name,body:v[t].body}},c=0;v.forEach((function(e){var t=0,n=e.postID;n>t&&(c=n),t=n}));var s=function(t,c){var s=[];for(var a in t){var r=t[a];r.pID===c&&function(){var t=n(r.cID);t.level=r.level;var c={};D.forEach((function(e){t.postID===e.postID&&(c=e)})),e.push(Object(l.jsx)(O,{post:t,selfEditBoxProps:c,editBoxFunc:S,setSelfEditBoxText:C,submitEditFunc:F},r.cID)),s.push(r.cID)}()}return s};!function(){for(var a in v){var r=v[a];t.includes(r.postID)||function(){var a=n(r.postID),o={};b.forEach((function(e){a.postID===e.postID&&(o=e)}));var i={};D.forEach((function(e){a.postID===e.postID&&(i=e)})),e.push(Object(l.jsx)(h,{post:a,replyBoxProps:o,replyBoxFunc:w,setReplyBoxText:E,submitReplyFunc:T,selfEditBoxProps:i,editBoxFunc:S,setSelfEditBoxText:C,submitEditFunc:F},a.postID));for(var u=r.postID;u<=c;)console.log(t),t=t.concat(s(r.childrenID,u)),u+=1}()}}(),o(e)}),[w,E,t,b,T,S,C,D]);return Object(c.useEffect)((function(){k()}),[k]),Object(c.useEffect)((function(){w()}),[w]),Object(c.useEffect)((function(){S()}),[S]),Object(c.useEffect)((function(){B()}),[B]),Object(l.jsx)("div",{children:a})},g=function(e){var t=e.setLogoutFunc;e.style;return Object(l.jsx)(b.a,{variant:"secondary",onClick:function(){return t(!1),sessionStorage.setItem("auth-roar","")},className:"rounded-pill",children:"Logout"})},y=function(e){var t=e.setPostText,n=e.submitPostFunc;return Object(l.jsxs)("div",{className:"my-2",children:[Object(l.jsx)("h3",{className:"title",children:"Speak Your Mind"}),Object(l.jsx)("textarea",{className:"form-control",rows:3,id:"post-box",onChange:function(e){t(e)}}),Object(l.jsx)(b.a,{variant:"secondary",onClick:function(){n()},className:"form-control",children:"Submit Post"})]})},I=function(e){var t=e.setLogoutFunc,n=Object(c.useState)([]),s=Object(r.a)(n,2),a=s[0],o=s[1],p=Object(c.useState)([]),b=Object(r.a)(p,2),x=b[0],h=b[1],O=Object(c.useState)(""),I=Object(r.a)(O,2),D=I[0],N=I[1],k=Object(c.useState)(""),S=Object(r.a)(k,2),C=S[0],F=S[1],w=Object(c.useState)({}),E=Object(r.a)(w,2),T=(E[0],E[1],Object(c.useCallback)(Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length){e.next=8;break}return e.next=3,fetch("http://127.0.0.1:8082/users/read");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,o(n);case 8:case"end":return e.stop()}}),e)}))),[a.length])),B=Object(c.useCallback)((function(){var e=f(a);e.length?h(e):h([])}),[a]),P=Object(c.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.next=4,B();case 4:case"end":return e.stop()}}),e)}))),[B,T]),L=Object(c.useCallback)(Object(u.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("auth-roar"),e.next=3,m(t);case 3:return n=e.sent,c={body:C,visibility:!0,user:{id:n}},e.next=7,fetch("http://127.0.0.1:8082/posts/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 7:201===e.sent.status?console.log("Post successful"):console.log("Post unsuccessful");case 9:case"end":return e.stop()}}),e)}))),[C]);return Object(c.useEffect)((function(){P()}),[P,D,C]),Object(l.jsxs)("div",{className:"container-fluid mt-3 col-lg-6 col-sm-12",children:[Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)(j,{}),Object(l.jsx)(g,{setLogoutFunc:t}),Object(l.jsx)(y,{setPostText:function(e){F(e.target.value)},submitPostFunc:L})]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)(d,{userInputFunc:function(e){N(e.target.value)},searchFunc:function(){console.log("feature coming soon")}}),Object(l.jsx)(v,{postDictionary:x})]})]})},D=function(e){var t=e.inputFunc;return Object(l.jsx)("input",{type:"text",onChange:function(e){return t(e)},className:"form-control rounded-pill my-1",placeholder:"Username"})},N=function(e){var t=e.inputFunc;return Object(l.jsx)("input",{type:"password",onChange:function(e){return t(e)},className:"form-control rounded-pill my-1",placeholder:"Password"})},k=function(){return Object(l.jsx)("h3",{className:"title text-center",children:"Login"})},S=function(e){var t=e.redirectFunc;return Object(l.jsx)(b.a,{variant:"secondary",onClick:function(){return t()},className:"rounded-pill form-control my-1",children:"Register"})},C=function(e){var t=e.loginFunc;return Object(l.jsx)(b.a,{variant:"secondary",onClick:function(){return t()},className:"rounded-pill form-control",children:"Login"})},F=function(){return Object(l.jsx)("h3",{className:"title text-center",children:"Register"})},w=function(e){var t=e.inputFunc,n=e.type,c=e.placeholder;return Object(l.jsx)("input",{type:n,onChange:function(e){return t(e)},className:"form-control rounded-pill my-1",placeholder:c})},E=function(e){var t=e.setLoginFunc,n=Object(c.useState)(""),s=Object(r.a)(n,2),a=s[0],o=s[1],j=Object(c.useState)(""),p=Object(r.a)(j,2),d=p[0],f=p[1],x=Object(c.useState)(""),h=Object(r.a)(x,2),O=h[0],m=h[1],v=Object(c.useState)(""),g=Object(r.a)(v,2),y=g[0],I=g[1],D=Object(c.useCallback)(Object(u.a)(i.a.mark((function e(){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("username: ".concat(a,", password: ").concat(y)),e.next=3,fetch("http://127.0.0.1:8082/users/login",{method:"POST",headers:{username:a,password:y}});case 3:return n=e.sent,e.next=6,n.text();case 6:"INVALID"!==(c=e.sent)?(sessionStorage.setItem("auth-roar",c),console.log("Successfully logged in"),t(!0)):console.log("Unsuccessful attempt");case 8:case"end":return e.stop()}}),e)}))),[y,t,a]),N=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:a,name:d,email:O,password:y},e.next=3,fetch("http://127.0.0.1:8082/users/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(201!==e.sent.status){e.next=10;break}return console.log("Successfully created"),e.next=8,D();case 8:e.next=11;break;case 10:console.log("Unsuccessful!");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"container-fluid mt-3 col-lg-6 col-sm-12",children:[Object(l.jsx)(F,{}),Object(l.jsx)(w,{inputFunc:function(e){o(e.target.value)},type:"text",placeholder:"Username"}),Object(l.jsx)(w,{inputFunc:function(e){f(e.target.value)},type:"text",placeholder:"Name"}),Object(l.jsx)(w,{inputFunc:function(e){m(e.target.value)},type:"email",placeholder:"Email"}),Object(l.jsx)(w,{inputFunc:function(e){I(e.target.value)},type:"password",placeholder:"Password"}),Object(l.jsx)(b.a,{variant:"secondary",onClick:function(){N()},className:"rounded-pill form-control",children:"Submit"})]})},T=function(e){var t=e.setLoginFunc,n=Object(c.useState)(""),s=Object(r.a)(n,2),a=s[0],o=s[1],j=Object(c.useState)(""),p=Object(r.a)(j,2),b=p[0],d=p[1],f=Object(c.useState)(!1),x=Object(r.a)(f,2),h=x[0],O=x[1],m=function(e){o(e.target.value)},v=function(e){d(e.target.value)},g=function(){O(!0)},y=Object(c.useCallback)(Object(u.a)(i.a.mark((function e(){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("username: ".concat(a,", password: ").concat(b)),e.next=3,fetch("http://127.0.0.1:8082/users/login",{method:"POST",headers:{username:a,password:b}});case 3:return n=e.sent,e.next=6,n.text();case 6:"INVALID"!==(c=e.sent)?(sessionStorage.setItem("auth-roar",c),console.log("Successfully logged in"),t(!0)):console.log("Unsuccessful attempt");case 8:case"end":return e.stop()}}),e)}))),[b,t,a]),I=Object(c.useCallback)((function(){return console.log("username: ".concat(a,", password: ").concat(b)),h?h?Object(l.jsx)(E,{setLoginFunc:t}):void 0:Object(l.jsxs)("div",{className:"container-fluid mt-3 col-lg-6 col-sm-12",children:[Object(l.jsx)(k,{}),Object(l.jsx)(D,{inputFunc:m,defaultValue:a}),Object(l.jsx)(N,{inputFunc:v,defaultValue:b}),Object(l.jsx)(C,{loginFunc:y}),Object(l.jsx)("div",{className:"separator post-text",children:"Or"}),Object(l.jsx)(S,{redirectFunc:g})]})}),[y,b,h,a]);return Object(l.jsx)("div",{children:I()})},B=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),o=Object(r.a)(a,2),i=o[0],u=o[1],j=Object(c.useCallback)((function(){var e=sessionStorage.getItem("auth-roar");s(!(!e||"INVALID"===e))}),[]),p=Object(c.useCallback)((function(){u(n?[Object(l.jsx)(I,{setLogoutFunc:s})]:[Object(l.jsx)(T,{setLoginFunc:s})])}),[n]);return Object(c.useEffect)((function(){j(),p()}),[j,p]),Object(l.jsx)("div",{children:i})};a.a.render(Object(l.jsx)(B,{}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.2b42305e.chunk.js.map